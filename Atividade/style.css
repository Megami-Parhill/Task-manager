:root{
  --gold: #b8860b;
  --gold-2: #e0b14a;
  --muted:#8b8b8b;
  --bg:#fbfaf8;
  --card:#ffffff;
  --danger:#d9534f;
  --glass: rgba(255,255,255,0.9);
  --phone-width:380px;
  --accent: #8f6b1a;
  --text-color: #222;
  --border-color: rgba(0,0,0,0.05);
}

/* Dark mode variables */
[data-theme="dark"] {
  --bg: #1a1a1a;
  --card: #2d2d2d;
  --text-color: #e0e0e0;
  --muted: #999;
  --glass: rgba(45,45,45,0.95);
  --border-color: rgba(255,255,255,0.1);
}

/* Color themes */
[data-accent="blue"] { --gold: #4a90e2; --gold-2: #6ba3e8; --accent: #3a7bc8; }
[data-accent="green"] { --gold: #2ecc71; --gold-2: #52d885; --accent: #27ae60; }
[data-accent="purple"] { --gold: #9b59b6; --gold-2: #b570d1; --accent: #8e44ad; }
[data-accent="red"] { --gold: #e74c3c; --gold-2: #ec7063; --accent: #c0392b; }
[data-accent="orange"] { --gold: #f39c12; --gold-2: #f5b041; --accent: #d68910; }
[data-accent="gold"] { --gold: #b8860b; --gold-2: #e0b14a; --accent: #8f6b1a; }

html,body{height:100%;margin:0;font-family:Inter, "Segoe UI", Roboto, Arial, sans-serif;background:var(--bg);color:var(--text-color);transition:background 0.3s, color 0.3s}
body{
  background-image:
    linear-gradient(45deg, rgba(0,0,0,0.02) 25%, transparent 25%),
    linear-gradient(-45deg, rgba(0,0,0,0.02) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, rgba(0,0,0,0.02) 75%),
    linear-gradient(-45deg, transparent 75%, rgba(0,0,0,0.02) 75%);
  background-size: 40px 40px;
  background-position: 0 0, 0 20px, 20px -20px, -20px 0px;
  display:flex;align-items:center;justify-content:center;padding:20px;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}
[data-theme="dark"] body{
  background-image:
    linear-gradient(45deg, rgba(255,255,255,0.02) 25%, transparent 25%),
    linear-gradient(-45deg, rgba(255,255,255,0.02) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, rgba(255,255,255,0.02) 75%),
    linear-gradient(-45deg, transparent 75%, rgba(255,255,255,0.02) 75%);
}

.phone {
  width:var(--phone-width);
  max-width:100vw;
  min-width:320px;
  height:100vh;
  max-height:812px;
  min-height:568px;
  border-radius:28px;
  box-shadow: 0 12px 40px rgba(30,40,50,0.12);
  background: linear-gradient(180deg,#fffdf9, #f8f5ef);
  padding:18px;
  box-sizing:border-box;
  position:relative;
  overflow:hidden;
}

/* Mobile fullscreen mode */
@media (max-width: 480px) {
  body {
    padding: 0;
    align-items: stretch;
  }
  .phone {
    width: 100vw;
    max-width: 100vw;
    height: 100vh;
    max-height: 100vh;
    border-radius: 0;
    padding: 0;
  }
  .screen {
    border-radius: 0;
    padding: 16px;
    padding-bottom: 80px; /* Space for FAB */
  }
}

/* Landscape orientation */
@media (max-height: 500px) and (orientation: landscape) {
  .phone {
    height: 100vh;
    max-height: 100vh;
  }
  .screen {
    padding-bottom: 80px;
  }
}

.screen {
  height:100%;
  background:var(--card);
  border-radius:18px;
  padding:18px;
  box-sizing:border-box;
  overflow:auto;
  -webkit-overflow-scrolling: touch;
  position:relative;
}

.view-header {
  margin-bottom: 12px;
}

header.app-header{
  display:flex;align-items:center;justify-content:space-between;padding-bottom:8px;border-bottom:2px solid var(--border-color);
  margin-bottom:12px;
}
header.app-header h1{font-weight:700;color:var(--gold);margin:0;font-size:20px}
.menu-btn{font-size:22px;color:var(--text-color);opacity:0.9;cursor:pointer;transition:opacity 0.2s}
.menu-btn:hover{opacity:1}

/* forms */
.card{background:var(--glass);border-radius:10px;padding:14px;margin:10px 0;box-shadow:0 1px 0 rgba(0,0,0,0.03)}
label{display:block;font-weight:700;color:var(--accent);margin-bottom:6px;font-size:13px}
input[type="text"], input[type="email"], input[type="password"], textarea, select {
  width:100%;padding:10px;border-radius:6px;border:1px solid #e7e1d9;background:#fff;box-sizing:border-box;font-size:14px;
}
textarea{min-height:84px;resize:vertical}
.btn{
  display:inline-block;padding:10px 14px;border-radius:8px;border:none;background:var(--gold);color:#fff;font-weight:700;cursor:pointer;
  box-shadow:0 6px 14px rgba(184,134,11,0.12);
}
.btn.ghost{background:transparent;color:var(--gold);border:2px solid rgba(184,134,11,0.12)}
.btn.danger{background:var(--danger);box-shadow:none}

/* login layout */
.login-box{display:flex;flex-direction:column;align-items:center;justify-content:center;height:80%}
.avatar{
  width:78px;height:78px;border-radius:50%;background:linear-gradient(180deg,#fff7eb,#fff8f0);display:flex;align-items:center;justify-content:center;margin-bottom:12px;
  box-shadow: inset 0 -6px 12px rgba(0,0,0,0.03);
}
.avatar svg{width:40px;height:40px;fill:var(--gold-2)}
.form-row{width:100%;margin-bottom:10px}

/* tabs for classes */
.tabs{display:flex;gap:8px;margin-bottom:8px}
.tab{padding:8px 10px;border-bottom:4px solid transparent;cursor:pointer;font-weight:700;color:#555}
.tab.active{border-color:var(--gold);color:var(--gold)}

/* task list */
.task-list{list-style:none;padding:0;margin:0}
.task-item{display:flex;align-items:flex-start;gap:10px;padding:10px;border-bottom:1px dashed rgba(0,0,0,0.04)}
.task-item .piece{width:34px;height:34px;border-radius:8px;background:linear-gradient(180deg,rgba(184,134,11,0.12),rgba(184,134,11,0.06));display:flex;align-items:center;justify-content:center;font-size:18px}
.task-content{flex:1}
.task-title{font-weight:700;margin:0;display:flex;align-items:center;gap:8px}
.task-meta{color:var(--muted);font-size:13px;margin-top:6px}
.task-actions{display:flex;flex-direction:column;gap:6px}

.small {font-size:12px;padding:6px 8px;border-radius:6px;border:1px solid rgba(0,0,0,0.06);background:#fff}
.plus-circle{display:inline-flex;align-items:center;gap:8px;cursor:pointer;color:var(--gold);font-weight:700;margin-top:8px}

/* modal */
.overlay{position:fixed;inset:0;background:rgba(10,10,20,0.35);display:flex;align-items:center;justify-content:center}
.modal{width:90%;max-width:360px;background:#fff;padding:16px;border-radius:12px;box-shadow:0 14px 40px rgba(0,0,0,0.25)}

/* details footer */
.footer-btns{display:flex;justify-content:space-between;align-items:center;gap:8px;margin-top:12px}

/* productivity canvas */
.charts{display:flex;flex-direction:column;gap:16px;align-items:center;padding:10px}
canvas{background:transparent;border-radius:8px}

/* utilities */
.muted{color:var(--muted)}
.flex{display:flex}
.gap-8{gap:8px}

/* Sidebar */
.sidebar-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,0.5);opacity:0;visibility:hidden;transition:opacity 0.3s,visibility 0.3s;z-index:998
}
.sidebar-overlay.active{opacity:1;visibility:visible}

.sidebar{
  position:fixed;top:0;right:-320px;width:280px;height:100vh;background:var(--card);box-shadow:-2px 0 12px rgba(0,0,0,0.15);
  transition:right 0.3s ease;z-index:999;display:flex;flex-direction:column;overflow-y:auto
}
.sidebar.active{right:0}

.sidebar-header{
  display:flex;align-items:center;justify-content:space-between;padding:18px;border-bottom:2px solid var(--border-color)
}
.sidebar-header h2{font-size:18px;color:var(--gold);margin:0}
.sidebar-close{font-size:28px;background:none;border:none;color:var(--text-color);cursor:pointer;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:6px;transition:background 0.2s}
.sidebar-close:hover{background:rgba(0,0,0,0.05)}
[data-theme="dark"] .sidebar-close:hover{background:rgba(255,255,255,0.1)}

.sidebar-nav{
  flex:1;padding:12px 0
}
.sidebar-nav-item{
  width:100%;display:flex;align-items:center;gap:12px;padding:14px 18px;background:none;border:none;color:var(--text-color);
  cursor:pointer;font-size:15px;font-weight:600;text-align:left;transition:background 0.2s;border-left:3px solid transparent
}
.sidebar-nav-item:hover{background:rgba(0,0,0,0.03)}
[data-theme="dark"] .sidebar-nav-item:hover{background:rgba(255,255,255,0.05)}
.sidebar-nav-item.active{background:rgba(184,134,11,0.1);border-left-color:var(--gold);color:var(--gold)}
.nav-icon{font-size:20px;width:24px;text-align:center}

.sidebar-footer{
  padding:18px;border-top:2px solid var(--border-color)
}
.theme-section h3{font-size:14px;margin:0 0 12px 0;color:var(--accent)}
.theme-controls{display:flex;flex-direction:column;gap:16px}
.theme-toggle{
  display:flex;align-items:center;gap:10px;cursor:pointer;font-size:14px;color:var(--text-color)
}
.theme-toggle input[type="checkbox"]{width:auto;margin:0}
.accent-colors label{font-size:12px;margin-bottom:8px;color:var(--muted)}
.color-palette{
  display:flex;gap:8px;flex-wrap:wrap
}
.color-option{
  width:32px;height:32px;border-radius:8px;border:2px solid transparent;cursor:pointer;transition:transform 0.2s,box-shadow 0.2s
}
.color-option:hover{transform:scale(1.1);box-shadow:0 2px 8px rgba(0,0,0,0.2)}
.color-option.active{border-color:var(--text-color);box-shadow:0 0 0 2px var(--card), 0 0 0 4px var(--text-color)}

/* Enhanced chess piece icons */
.piece{width:34px;height:34px;border-radius:8px;background:linear-gradient(180deg,rgba(184,134,11,0.15),rgba(184,134,11,0.08));
  display:flex;align-items:center;justify-content:center;font-size:20px;font-weight:bold;box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)}
[data-theme="dark"] .piece{background:linear-gradient(180deg,rgba(184,134,11,0.25),rgba(184,134,11,0.15))}

/* Dark mode adjustments */
[data-theme="dark"] input[type="text"], [data-theme="dark"] input[type="email"], 
[data-theme="dark"] input[type="password"], [data-theme="dark"] textarea, 
[data-theme="dark"] select {
  background:#1e1e1e;border-color:rgba(255,255,255,0.1);color:var(--text-color)
}
[data-theme="dark"] .card{box-shadow:0 1px 0 rgba(255,255,255,0.05)}
[data-theme="dark"] .task-item{border-bottom-color:rgba(255,255,255,0.05)}
[data-theme="dark"] .tab{color:var(--muted)}
[data-theme="dark"] .small{background:#1e1e1e;border-color:rgba(255,255,255,0.1);color:var(--text-color)}
[data-theme="dark"] .phone{background:linear-gradient(180deg,#2d2d2d,#252525)}
[data-theme="dark"] .sidebar{background:var(--card)}
[data-theme="dark"] .sidebar-header{border-bottom-color:var(--border-color)}
[data-theme="dark"] .sidebar-footer{border-top-color:var(--border-color)}

/* Floating Action Button (FAB) */
.fab {
  position: fixed;
  bottom: 24px;
  right: 24px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: var(--gold);
  color: #fff;
  border: none;
  box-shadow: 0 4px 12px rgba(184, 134, 11, 0.4), 0 2px 4px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100;
  transition: transform 0.2s, box-shadow 0.2s, background 0.3s;
  font-size: 24px;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
}

.fab:hover {
  transform: scale(1.1);
  box-shadow: 0 6px 16px rgba(184, 134, 11, 0.5), 0 4px 8px rgba(0, 0, 0, 0.3);
}

.fab:active {
  transform: scale(0.95);
}

.fab-icon {
  font-size: 28px;
  line-height: 1;
  display: block;
}

/* FAB dentro da view-main */
#view-main .fab {
  position: absolute;
  bottom: 24px;
  right: 24px;
}

/* Mobile adjustments for FAB */
@media (max-width: 480px) {
  .fab {
    bottom: 20px;
    right: 20px;
    width: 56px;
    height: 56px;
  }
  #view-main .fab {
    bottom: 20px;
    right: 20px;
  }
}

/* Dark mode FAB */
[data-theme="dark"] .fab {
  box-shadow: 0 4px 12px rgba(184, 134, 11, 0.5), 0 2px 4px rgba(0, 0, 0, 0.4);
}

[data-theme="dark"] .fab:hover {
  box-shadow: 0 6px 16px rgba(184, 134, 11, 0.6), 0 4px 8px rgba(0, 0, 0, 0.5);
}

/* Responsive tweaks */
@media (max-width:420px){ 
  .phone{height:100vh; max-height:100vh} 
  .sidebar{width:260px} 
  .screen{padding:12px}
  header.app-header{padding-bottom:6px; margin-bottom:8px}
  .view-header{margin-bottom:8px}
}

/* Mobile optimizations */
@media (max-width: 768px) {
  .btn {
    padding: 12px 16px;
    font-size: 15px;
    min-height: 44px; /* Touch target size */
  }
  .menu-btn {
    min-width: 44px;
    min-height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  input[type="text"], input[type="email"], input[type="password"], textarea, select {
    font-size: 16px; /* Prevents zoom on iOS */
    padding: 12px;
    min-height: 44px;
  }
  .task-item {
    padding: 12px;
    min-height: 60px;
  }
  .tab {
    padding: 10px 12px;
    min-height: 44px;
  }
}
